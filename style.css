:root{
  --deep1: #120022;
  --deep2: #3f0066;
  --mid: #8a34ff;
  --light: #cf8bff;
  --gold1: #ffdd7e;
  --gold2: #ffd36b;
  --muted: rgba(255,255,255,0.9);
  --card-bg: linear-gradient(135deg, rgba(255,255,255,0.03), rgba(255,255,255,0.01));
  --glass: rgba(255,255,255,0.03);
  --note-font: 'Great Vibes', cursive;
}

*{box-sizing:border-box}
html,body{height:100%}
body{
  margin:0;
  font-family: 'Poppins', system-ui, -apple-system, "Segoe UI", Roboto, "Helvetica Neue", Arial;
  color: #fff;
  background:
    radial-gradient(900px 400px at 10% 15%, rgba(138,52,255,0.14), transparent 8%),
    linear-gradient(180deg, var(--deep1), var(--deep2) 40%, var(--mid) 75%, var(--light) 100%);
  -webkit-font-smoothing:antialiased;
  -moz-osx-font-smoothing:grayscale;
  overflow-x:hidden;
}

/* loader */
.loader{
  position:fixed; inset:0; display:flex; align-items:center; justify-content:center; z-index:9999;
  background: linear-gradient(180deg, rgba(8,3,20,0.98), rgba(16,6,40,0.96));
  transition: opacity 450ms ease, visibility 450ms;
}
.loader-inner{ text-align:center; transform:translateY(-8px) }
.loader .sparkle{ font-size:40px; margin-bottom:12px; animation: shimmer 1.4s ease-in-out infinite; }
.loader-text{ font-size:18px; color:var(--gold2); font-weight:700; letter-spacing:0.6px; }

@keyframes shimmer {
  0%{ transform: translateY(0) rotate(0) }
  50%{ transform: translateY(-8px) rotate(8deg) }
  100%{ transform: translateY(0) rotate(0) }
}

/* global layout */
.page{ min-height:100vh; display:flex; align-items:center; justify-content:center; padding:36px 18px }
.center-card{
  width:100%; max-width:820px; margin:0 auto; padding:28px; text-align:center;
  background: var(--card-bg);
  border-radius:16px; box-shadow: 0 12px 60px rgba(6,1,18,0.6);
  border: 1px solid rgba(255,255,255,0.03);
}

/* headings */
h1,h2{ margin:0 0 14px 0; font-weight:700; color: #fff; text-shadow: 0 6px 30px rgba(0,0,0,0.45) }

/* btn zone for safe placement */
.btn-zone{ position:relative; min-height:90px; display:flex; align-items:center; justify-content:center; padding-top:10px }

/* buttons */
.btn{
  display:inline-block; cursor:pointer; border:none; outline:none;
  padding:12px 28px; border-radius:28px; font-weight:700; font-size:16px;
  background: linear-gradient(90deg,var(--gold1),var(--gold2));
  color: #2a0330; box-shadow: 0 10px 30px rgba(120,40,160,0.12);
  transition: transform .22s ease, box-shadow .22s ease, opacity .2s; margin-top:18px;
}
.btn:hover{ transform: translateY(-6px) scale(1.02) }
.btn.ghost{ background: transparent; border: 1px solid rgba(255,255,255,0.06); color:var(--muted) }

/* small utility */
.pop{ animation: pop 280ms ease; }
@keyframes pop{ 0%{ transform: scale(.98)} 60%{ transform: scale(1.06)} 100%{ transform: scale(1)} }

/* q area */
.q-area{ display:flex; flex-direction:column; gap:10px; margin-top:14px; align-items:center }
.option{ width:100%; max-width:460px; text-align:center; }

/* response area */
.response{ margin-top:16px; color:var(--gold2); font-weight:700; min-height:32px }

/* text input */
.text-input{ width:100%; max-width:360px; padding:10px 12px; border-radius:8px; border:none; margin-top:8px; }

/* page transitions */
.fade-in{ animation: fadeInPage .58s ease both }
.fade-out{ animation: fadeOutPage .45s ease both }
@keyframes fadeInPage{ from{ opacity:0; transform:translateY(8px) } to{ opacity:1; transform:none } }
@keyframes fadeOutPage{ from{ opacity:1 } to{ opacity:0; transform:translateY(-6px) } }

/* surprise specifics */
.container-narrow{ max-width:820px; padding-bottom:6px }
#scene{ perspective:1200px; margin:8px auto 6px auto; display:flex; justify-content:center; align-items:center }
.gift-3d{
  width:260px; height:260px; margin:38px auto; position:relative; transform-style:preserve-3d;
  transition: transform .8s cubic-bezier(.22,.9,.27,1), box-shadow .4s ease;
}
.gift-3d:hover{ transform: translateY(-8px) rotateX(3deg) rotateY(2deg) }

.gift-3d .lid{
  position:absolute; left:0; top:-64px; width:100%; height:88px; border-radius:14px;
  background: linear-gradient(180deg, #ffd36b, #ffb86b);
  box-shadow: 0 18px 48px rgba(0,0,0,0.42), inset 0 -6px 18px rgba(255,255,255,0.16);
  transform-origin: bottom center;
  transition: transform .9s cubic-bezier(.18,.9,.32,1), box-shadow .6s;
  z-index:5;
}

/* box body */
.gift-3d .box-body{
  position:absolute; left:0; top:0; width:100%; height:100%;
  border-radius:18px; background: linear-gradient(135deg,#5b00ea 10%, #a46bff 60%);
  box-shadow: 0 26px 80px rgba(24,6,70,0.62), inset 0 -10px 30px rgba(0,0,0,0.18);
  overflow:visible;
}

/* ribbons */
.ribbon-vertical{
  position:absolute; left: calc(50% - 16px); top:0; width:32px; height:100%;
  background: linear-gradient(180deg,#ffd36b,#ffdd9e);
  border-radius:8px; box-shadow: inset 0 -3px 6px rgba(0,0,0,0.12);
  z-index:6;
}
.ribbon-horizontal{
  position:absolute; left:0; top: calc(50% - 16px); height:32px; width:100%;
  background: linear-gradient(90deg,#ffd36b,#ffdd9e);
  border-radius:8px; box-shadow: inset -3px 0 6px rgba(0,0,0,0.12);
  z-index:6;
}

/* bow */
.bow{ position:absolute; left:50%; top: -8px; transform: translateX(-50%); z-index:8; display:flex; gap:6px; }
.bow-left, .bow-right{
  width:48px; height:36px; background: linear-gradient(120deg,#ffd36b,#ffb86b);
  border-radius:50% 20% 40% 50%; box-shadow: 0 8px 20px rgba(0,0,0,0.2);
  transform-origin:center; transform: rotate(-20deg);
}
.bow-right{ transform: rotate(18deg); border-radius:20% 50% 50% 40%; }

/* opened animation */
.gift-3d.opened{ transform: translateY(-6px) scale(1.03) rotateX(6deg) }

/* typed note */
.note{
  display:block; margin:28px auto 0; padding:20px; border-radius:14px; font-size:20px;
  color:#f7e7c2; white-space:pre-wrap; min-height:160px; max-width:900px;
  background: linear-gradient(180deg, rgba(255,255,255,0.02), rgba(255,255,255,0.01));
  border: 1px solid rgba(255,255,255,0.03);
  box-shadow: 0 18px 60px rgba(6,1,18,0.55);
  font-family: var(--note-font);
  text-align:center;
  line-height:1.4;
  letter-spacing:0.2px;
  color: #fff6e6;
  text-shadow: 0 6px 18px rgba(138,52,255,0.06), 0 2px 8px rgba(0,0,0,0.35);
}

/* typing caret */
.typing { border-right: 2px solid rgba(255, 240, 190, 0.9); padding-right:6px }

/* floating hearts */
.hearts{ position:fixed; inset:0; pointer-events:none; overflow:hidden; z-index:30 }
.heart{ position:absolute; font-size:20px; will-change: transform, opacity; animation: heartFloat linear forwards; }
@keyframes heartFloat{ 0%{ transform: translateY(110vh) scale(1); opacity:1 } 100%{ transform: translateY(-20vh) scale(1.6); opacity:0 } }

/* responsive */
@media (max-width:560px){
  .gift-3d{ width:180px; height:180px }
  .gift-3d .lid{ top:-48px; height:60px }
  .note{ font-size:16px; min-height:120px }
  .btn{ font-size:15px; padding:10px 18px }
  .btn-zone{ min-height:120px }
}
